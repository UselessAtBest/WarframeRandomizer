<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Line Selector with Counter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f9f9f9;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        button {
            padding: 15px;
            font-size: 16px;
            cursor: pointer;
        }
        #output-container {
         display: flex;               /* Use flexbox */
         justify-content: center;     /* Center horizontally */
}

    #output {
         display: inline-block;       /* Allow box to resize with content */
          font-size: 30px;            /* Change font size */
           color: #333;                /* Change text color */
            font-weight: bold;          /* Make text bold */
         padding: 15px;              /* Add padding */
         border: 4px groove #ccc;    /* Add a dashed border */
         background-color: #f9f9f9;  /* Background color */
          border-radius: 10px;         /* Rounded corners */
          text-align: center;         /* Center align text */
         max-width: 100%;            /* Prevent the box from being too wide */
         word-wrap: break-word;      /* Break long words to prevent overflow */
}
        #counter {
            font-size: 24px;
            font-weight: bold;
        }
                
        #message {
            display: flex;               
            color: red;
            font-weight: bold;
            display: block;
            margin: 10px auto;
            font-size: 20px;
        }

        /* Modal Styles */
        #modal, #previous-rolls-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        #modal-content, #previous-rolls-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            width: 400px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        #modal-header, #previous-rolls-header {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        #modal-paragraph {
            font-size: 18px;
            margin-bottom: 30px;
        }

        #counter-container {
            border: 2px solid #ddd; /* Border color */
           padding: 10px;          /* Padding inside the box */
         background-color: #fff; /* Background color */
         border-radius: 5px;     /* Rounded corners */
         margin-bottom: 20px;    /* Spacing below the counter */
         width: fit-content;      /* Adjust width based on content */
        }
        
        #close-modal-btn, #close-rolls-btn, #undo-btn {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            margin-top: 10px;
        }

        #close-modal-btn {
            background-color: red;
            color: white;
        }

        #close-modal-btn:hover {
            background-color: darkred;
        }

        #close-rolls-btn {
            background-color: rgba(255, 0, 0, 0.733); /* Change to your desired color */
             color: white;
              border: none;
             padding: 10px 15px;
              border-radius: 5px;
             cursor: pointer;
        }

        #close-rolls-btn:hover {
             background-color: darkred; /* Darker shade on hover */
        }


        #undo-btn {
            background-color: blue;
            color: white;
        }

        #undo-btn:hover {
            background-color: darkblue;
        }

        /* Group Styles */
        .group {
         display: inline-block; /* This allows the box to resize with content */
         border: 1px solid #ddd; /* Add border */
         padding: 10px; /* Padding inside the box */
         margin: 10px; /* Margin around the box */
         border-radius: 5px; /* Rounded corners */
         width: auto; /* Automatically resize based on content */
        }

        .option-line {
           display: flex; /* Use flexbox for options */
         justify-content: space-between; /* Space between text and checkbox */
         align-items: center; /* Center alignment */
         margin-top: 5px; /* Space above each option */
        }

        .group-header, .group-footer {
            font-weight: bold;
        }

        .option-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 5px;
        }

        .grayed-out {
            background-color: #e0e0e0;
            color: #666;
            text-decoration: line-through;
        }

        /* Footer Option Line */
        .footer-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .footer-line input {
            margin-left: 10px;
        }

        /* Previous Rolls Styles */
        #previous-rolls-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .roll-item {
            margin: 5px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .roll-item span {
            width: calc(100% - 100px); /* Adjust width to fit layout */
        }
    </style>
</head>
<body>
    <div style="display: flex; justify-content: space-between;">
        <h1>Random Line Selector with Counter</h1>
        <button id="previous-rolls-btn" onclick="togglePreviousRolls()">Previous Rolls</button>
    </div>

    <div id="counter-container"> 
        <div id="counter">Counter: 100</div>
    </div>
    
    <div id="output-container">
        <div id="output">Random Line will appear here</div>

    </div>
    
    <div id="message"></div>


    <div class="grid-container">

        <button onclick="getRandomLine('10-Warframe.txt')">
            <span class="button-main-text">Warframe</span>
            <span class="button-sub-text">(10 points)</span>
        </button>
        <button onclick="getRandomLine('5-WarframeModHighCost.txt')">
            <span class="button-main-text">Warframe Mod</span>
            <span class="button-mid-text">High Cost</span>
            <span class="button-sub-text">(5 points)</span>
        </button>
        <button onclick="getRandomLine('3-WarframeModLowCost.txt')">
            <span class="button-main-text">Warframe Mod</span>
            <span class="button-mid-text">Low Cost</span>
            <span class="button-sub-text">(3 points)</span>
        </button>
        <button onclick="getRandomLine('1-WarframeModUtility.txt')">
            <span class="button-main-text">Warframe Mod</span>
            <span class="button-mid-text">Utility</span>
            <span class="button-sub-text">(1 point)</span>
        </button>
        <button onclick="getRandomLine('3-WarframeModAura.txt')">
            <span class="button-main-text">Warframe Mod</span>
            <span class="button-mid-text">Aura</span>
            <span class="button-sub-text">(3 points)</span>
        </button>

        <button onclick="getRandomLine('10-PrimaryWeaponHighCost.txt')">
            <span class="button-main-text">Primary Weapon</span>
            <span class="button-mid-text">High Cost</span>
            <span class="button-sub-text">(10 points)</span>
        </button>
        <button onclick="getRandomLine('5-PrimaryWeaponLowCost.txt')">
            <span class="button-main-text">Primary Weapon Mod</span>
            <span class="button-mid-text">Low Cost Cost</span>
            <span class="button-sub-text">(5 points)</span>
        </button>
        <button onclick="getRandomLine('5-PrimaryWeaponModHighCost.txt')">
            <span class="button-main-text">Primary Weapon Mod</span>
            <span class="button-mid-text">High Cost</span>
            <span class="button-sub-text">(5 points)</span>
        </button>
        <button onclick="getRandomLine('3-PrimaryWeaponModLowCost.txt')">
            <span class="button-main-text">Primary Weapon Mod</span>
            <span class="button-mid-text">Low Cost</span>
            <span class="button-sub-text">(3 points)</span>
        </button>
        <button onclick="getRandomLine('1-PrimaryWeaponModUtility.txt')">
            <span class="button-main-text">Primary Weapon Mod</span>
            <span class="button-mid-text">Utility</span>
            <span class="button-sub-text">(1 points)</span>
        </button>

        <button onclick="getRandomLine('10-SecondaryWeaponHighCost.txt')">
            <span class="button-main-text">Secondary Weapon</span>
            <span class="button-mid-text">High Cost</span>
            <span class="button-sub-text">(10 points)</span>
        </button>
        <button onclick="getRandomLine('5-SecondaryWeaponLowCost.txt')">
            <span class="button-main-text">Secondary Weapon Mod</span>
            <span class="button-mid-text">Low Cost Cost</span>
            <span class="button-sub-text">(5 points)</span>
        </button>
        <button onclick="getRandomLine('5-SecondaryWeaponModHighCost.txt')">
            <span class="button-main-text">Secondary Weapon Mod</span>
            <span class="button-mid-text">High Cost</span>
            <span class="button-sub-text">(5 points)</span>
        </button>
        <button onclick="getRandomLine('3-SecondaryWeaponModLowCost.txt')">
            <span class="button-main-text">Secondary Weapon Mod</span>
            <span class="button-mid-text">Low Cost</span>
            <span class="button-sub-text">(3 points)</span>
        </button>
        <button onclick="getRandomLine('1-SecondaryWeaponModUtility.txt')">
            <span class="button-main-text">Secondary Weapon Mod</span>
            <span class="button-mid-text">Utility</span>
            <span class="button-sub-text">(1 points)</span>
        </button>

        <button onclick="getRandomLine('10-MeleeWeaponHighCost.txt')">
            <span class="button-main-text">Melee Weapon</span>
            <span class="button-mid-text">High Cost</span>
            <span class="button-sub-text">(10 points)</span>
        </button>
        <button onclick="getRandomLine('5-MeleeWeaponLowCost.txt')">
            <span class="button-main-text">Melee Weapon Mod</span>
            <span class="button-mid-text">Low Cost Cost</span>
            <span class="button-sub-text">(5 points)</span>
        </button>
        <button onclick="getRandomLine('5-MeleeWeaponModHighCost.txt')">
            <span class="button-main-text">Melee Weapon Mod</span>
            <span class="button-mid-text">High Cost</span>
            <span class="button-sub-text">(5 points)</span>
        </button>
        <button onclick="getRandomLine('3-MeleeWeaponModLowCost.txt')">
            <span class="button-main-text">Melee Weapon Mod</span>
            <span class="button-mid-text">Low Cost</span>
            <span class="button-sub-text">(3 points)</span>
        </button>
        <button onclick="getRandomLine('1-MeleeWeaponModUtility.txt')">
            <span class="button-main-text">Melee Weapon Mod</span>
            <span class="button-mid-text">Utility</span>
            <span class="button-sub-text">(1 points)</span>
        </button>



    </div>

    <style>
        .grid-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);  /* 5 columns */
            grid-template-rows: repeat(4, auto);     /* Auto height for each row */
            gap: 10px;                                /* Space between buttons */
            justify-items: center;  /* Center the buttons */
            margin: 0 auto;
            max-width: fit-content;
        }
    
        button {
            background-color: rgba(129, 142, 146, 0.973) ;    /* Button color */
            color: black;                                 /* Text color */
            border: 4px groove;                                /* Remove border */
            border-radius: 8px;                         /* Rounded corners */
            padding: 10px;                              /* Padding inside button */
            text-align: center;        /* Center text */
            cursor: pointer;           /* Pointer cursor on hover */
            width: 300px;              /* Fixed width for buttons */
        }
    
        button:hover {
            background-color: #0056b3; /* Darker shade on hover */
        }
    
        .button-main-text {
            font-size: 24px;
            font-weight: bold;         /* Bold main text */
            display: block;            /* Block display for new line */
        }

        .button-mid-text {
            font-size: 22px;
            text-decoration: underline;;         /* Bold main text */
            display: block;            /* Block display for new line */
        }
    
        .button-sub-text {
            font-size: 20px;           /* Smaller font size for subtext */
            display: block;            /* Block display for new line */
        }
    </style>

    <!-- Groups of Options -->
    <div id="groups">
 

        <!-- Repeat this group structure 18 more times for a total of 19 groups -->
        <div class="group" id="group2">
            <div class="group-header">Group 2 Header</div>
            <div class="option-line" id="option4">
                <span>Option 1 (5 points)</span>
                <input type="checkbox" onclick="updateCounter(5, 'option4', 'group2')">
            </div>
            <div class="option-line" id="option5">
                <span>Option 2 (10 points)</span>
                <input type="checkbox" onclick="updateCounter(10, 'option5', 'group2')">
            </div>
            <div class="option-line" id="option6">
                <span>Option 3 (15 points)</span>
                <input type="checkbox" onclick="updateCounter(15, 'option6', 'group2')">
            </div>
            <div class="footer-line">
                <span>Group 2 Footer (10 points)</span>
                <input type="checkbox" onclick="updateCounter(10, 'footer-option2', 'group2')">
            </div>
        </div>

        <div class="group" id="group3">
            <div class="group-header">Group 3 Header</div>
            <div class="option-line" id="option7">
                <span>Option 1 (5 points)</span>
                <input type="checkbox" onclick="updateCounter(5, 'option7', 'group3')">
            </div>
            <div class="option-line" id="option8">
                <span>Option 2 (10 points)</span>
                <input type="checkbox" onclick="updateCounter(10, 'option8', 'group3')">
            </div>
            <div class="option-line" id="option9">
                <span>Option 3 (15 points)</span>
                <input type="checkbox" onclick="updateCounter(15, 'option9', 'group3')">
            </div>
            <div class="footer-line">
                <span>Group 3 Footer (15 points)</span>
                <input type="checkbox" onclick="updateCounter(15, 'footer-option3', 'group3')">
            </div>
        </div>

        <div class="group" id="group4">
            <div class="group-header">Group 4 Header</div>
            <div class="option-line" id="option10">
                <span>Option 1 (5 points)</span>
                <input type="checkbox" onclick="updateCounter(5, 'option10', 'group4')">
            </div>
            <div class="option-line" id="option11">
                <span>Option 2 (10 points)</span>
                <input type="checkbox" onclick="updateCounter(10, 'option11', 'group4')">
            </div>
            <div class="option-line" id="option12">
                <span>Option 3 (15 points)</span>
                <input type="checkbox" onclick="updateCounter(15, 'option12', 'group4')">
            </div>
            <div class="footer-line">
                <span>Group 3 Footer (15 points)</span>
                <input type="checkbox" onclick="updateCounter(15, 'footer-option4', 'group4')">
            </div>
        </div>

        <!-- Repeat this group structure for additional groups -->
        
    </div>

<!-- Modal for Previous Rolls -->
<div id="previous-rolls-modal">
    <div id="previous-rolls-content">
        <div id="previous-rolls-header" style="display: flex; justify-content: space-between; align-items: center;">
            <button id="close-rolls-btn" onclick="closePreviousRolls()">
                <i class="fas fa-times"></i> Close
            </button>
            <span>Previous Rolls</span>
            <button id="undo-btn" onclick="undoLastRoll()">
                <i class="fas fa-undo"></i> Undo
            </button>
        </div>
        <div id="previous-rolls-list"></div>
    </div>
</div>



    <script>
        let counter = 100;
        let previousRolls = [];
        let lastRollPoints = 0;

        function getRandomLine(fileName) {
            const valueToSubtract = parseInt(fileName.split('-')[0]);

            if (counter >= valueToSubtract) {
                fetch(fileName)
                    .then(response => response.text())
                    .then(data => {
                        const lines = data.split('\n');
                        const randomLine = lines[Math.floor(Math.random() * lines.length)];
                        
                        lastRollPoints = valueToSubtract; // Store points used for the last roll
                        counter -= valueToSubtract;
                        previousRolls.push({ line: randomLine, cost: valueToSubtract }); // Add to previous rolls

                        updateCounterDisplay();
                        document.getElementById('output').textContent = randomLine;
                        document.getElementById('message').textContent = ''; 

                        // Update previous rolls display
                        updatePreviousRollsDisplay();
                    })
                    .catch(error => {
                        console.error('Error fetching the file:', error);
                        document.getElementById('output').textContent = 'Error fetching the file.';
                    });
            } else {
                document.getElementById('message').textContent = 'Not enough points to roll this option!';
            }
        }

        function updateCounter(value, optionId, groupId) {
            const checkbox = document.querySelector(`#${optionId} input[type="checkbox"]`);
            if (checkbox.checked) {
                counter += value;
                updateCounterDisplay();
                document.getElementById(optionId).classList.add('grayed-out');

                const allChecked = [...document.querySelectorAll(`#${groupId} input[type="checkbox"]`)].every(input => input.checked);
                if (allChecked) {
                    document.getElementById(groupId).classList.add('grayed-out');
                }
            }
        }

        function updateCounterDisplay() {
            document.getElementById('counter').textContent = `Counter: ${counter}`;
        }

        function togglePreviousRolls() {
            const modal = document.getElementById('previous-rolls-modal');
            modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
        }

        function closePreviousRolls() {
            document.getElementById('previous-rolls-modal').style.display = 'none';
        }

        function undoLastRoll() {
            if (previousRolls.length > 0) {
                const lastRoll = previousRolls.pop(); // Get the last roll
                counter += lastRoll.cost; // Add back the points
                updateCounterDisplay();
                updatePreviousRollsDisplay(); // Update the display
                document.getElementById('output').textContent = ''; // Clear the output
                lastRollPoints = 0; // Reset last roll points
            }
        }

        function updatePreviousRollsDisplay() {
            const rollsList = document.getElementById('previous-rolls-list');
            rollsList.innerHTML = ''; // Clear previous rolls display

            previousRolls.forEach((roll, index) => {
                const rollItem = document.createElement('div');
                rollItem.className = 'roll-item';
                rollItem.innerHTML = `<span>${roll.line}</span><span>(Cost: ${roll.cost} points)</span>`;
                rollsList.appendChild(rollItem);
            });
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        window.onload = function() {
            document.getElementById('modal').style.display = 'flex';
        };
    </script>
</body>
</html>
